<div>
	<div class="calendar-top-bar">
		<h3>{{ getCurrentMonth() }} {{ getCurrentYear() }}</h3>

		<div class="arrow-buttons-container">
			<dav-icon-button size="sm" (click)="ShowPrevious()">
				<fa-icon [icon]="faArrowLeftLight"></fa-icon>
			</dav-icon-button>

			<dav-icon-button size="sm" (click)="ShowNext()">
				<fa-icon [icon]="faArrowRightLight"></fa-icon>
			</dav-icon-button>
		</div>
	</div>

	<div id="calendar-label-div" class="position-absolute ml-1">
		<span
			class="position-absolute"
			*ngFor="let day of weekDayLabels; let i = index"
			[style.margin-left.px]="calendarDayWidth * i"
		>
			<span class="font-weight-light">{{ day }}</span>
			<br />
			<span
				[style.background-color]="
					currentDayOfWeek == i
						? dataService.darkTheme
							? '#3d4753'
							: '#e3e4e5'
						: ''
				"
				[style.padding-left.px]="currentDayOfWeek == i ? 2 : 0"
				[style.padding-right.px]="currentDayOfWeek == i ? 2 : 0"
				(click)="goToWeekday(i)"
				class="cursor"
				*ngIf="showMobileLayout"
			>
				{{ currentWeekDays[i] }}
			</span>
		</span>
	</div>

	<div
		id="calendarContainer"
		#calendarContainer
		[style.height.px]="calendarHeight"
		[style.width.px]="calendarWidth"
		style="margin-top: 30px"
	>
		<div
			class="d-flex"
			*ngFor="
				let week of dataService.desktopCalendarDaysDates;
				let i = index
			"
		>
			<div
				[ngClass]="dataService.darkTheme ? 'border border-dark' : 'border'"
				*ngFor="let date of week; let j = index"
				[style.height.px]="calendarDayHeight"
				[style.width.px]="calendarDayWidth"
				[style.background-color]="getDayBackgroundColor(i, j)"
				(click)="dayClicked(date)"
			>
				<span>{{ getDayOfDate(date) }}</span>

				<!-- Render todos -->
				<span
					class="badge badge-primary ml-1"
					*ngIf="dataService.desktopCalendarDaysTodos[i][j].length > 0"
				>
					{{ dataService.desktopCalendarDaysTodos[i][j].length }}
					{{ locale.todo }}
					<span
						*ngIf="dataService.desktopCalendarDaysTodos[i][j].length > 1"
					>
						{{ locale.s }}
					</span>
				</span>

				<!-- Render appointments -->
				<div>
					<calendo-small-appointment-item
						[appointment]="appointment"
						[enableDropdown]="false"
						[compact]="true"
						*ngFor="
							let appointment of dataService
								.desktopCalendarDaysAppointments[i][j];
							let k = index
						"
					></calendo-small-appointment-item>
				</div>
			</div>
		</div>
	</div>

	<div
		id="mobileCalendarContainer"
		#mobileCalendarContainer
		style="overflow: scroll; margin-top: 60px"
		[style.height.px]="calendarHeight"
		[style.width.px]="calendarWidth"
	>
		<div
			class="border"
			*ngFor="let date of dataService.mobileCalendarDaysDates; let i = index"
			[style.height.px]="calendarDayHeight"
			style="position: relative"
			(click)="dayClicked(date)"
		>
			<span>{{ getFullDayOfDate(date) }}</span>

			<!-- Render todos -->
			<span
				class="badge badge-primary ml-2"
				*ngIf="dataService.mobileCalendarDaysTodos[i].length > 0"
			>
				{{ dataService.mobileCalendarDaysTodos[i].length }} {{ locale.todo }}
				<span *ngIf="dataService.mobileCalendarDaysTodos[i].length > 1">
					{{ locale.s }}
				</span>
			</span>

			<!-- Render appointments -->
			<div class="d-flex flex-column">
				<calendo-small-appointment-item
					*ngFor="
						let appointment of dataService.mobileCalendarDaysAppointments[
							i
						];
						let k = index
					"
					[appointment]="appointment"
					[enableDropdown]="false"
					[compact]="true"
				></calendo-small-appointment-item>
			</div>
		</div>
	</div>
</div>
