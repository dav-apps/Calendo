<div class="container slide-up-in">
	<dav-header size="lg" backButtonVisible (backButtonClick)="GoBack()">
		{{ title }}
	</dav-header>

	<div class="content-container">
		<div class="appointments-container">
			<dav-header
				size="sm"
				[addButtonVisible]="!isDateBeforeToday"
				(addButtonClick)="createAppointmentDialog.show()"
			>
				{{ locale.appointments }}
			</dav-header>

			<div class="appointments-content-container">
				@if (dataService.selectedDayAppointments.length == 0) {
				<p class="no-items-message">
					{{ locale.noAppointments }}
				</p>
				} @for (appointment of dataService.selectedDayAppointments; track
				appointment.uuid) {
				<div style="display: inline-flex; align-self: center">
					<calendo-small-appointment-item
						[appointment]="appointment"
						(contextmenu)="
							smallAppointmentItemContextMenu($event, appointment)
						"
						(delete)="deleteAppointmentDialog.show()"
					></calendo-small-appointment-item>
				</div>
				}
			</div>
		</div>

		<div class="todos-container">
			<dav-header
				size="sm"
				[addButtonVisible]="!isDateBeforeToday"
				(addButtonClick)="createTodoDialog.show()"
			>
				{{ locale.todos }}
			</dav-header>

			<div class="todos-content-container">
				@if (dataService.selectedDayTodos.length == 0 &&
				dataService.selectedDayTodoLists.length == 0) {
				<p class="no-items-message">
					{{ locale.noTodos }}
				</p>
				} @for (todo of dataService.selectedDayTodos; track todo.uuid) {
				<calendo-small-todo-item
					[todo]="todo"
					(delete)="DeleteTodo(todo)"
				></calendo-small-todo-item>
				} @for (todoList of dataService.selectedDayTodoLists; track
				todoList.uuid) {
				<calendo-small-todo-list-item
					[todoList]="todoList"
				></calendo-small-todo-list-item>
				}
			</div>
		</div>
	</div>

	<calendo-new-todo-modal (save)="CreateTodo($event)"></calendo-new-todo-modal>
	<calendo-todo-list-modal
		#todoListModal
		(save)="CreateTodoList($event)"
	></calendo-todo-list-modal>
</div>

<dav-context-menu
	#contextMenu
	[visible]="contextMenuVisible"
	[posX]="contextMenuPositionX"
	[posY]="contextMenuPositionY"
>
	<!-- Edit -->
	<dav-context-menu-item [value]="actionsLocale.edit">
		<fa-icon slot="icon" [icon]="faEditLight"></fa-icon>
	</dav-context-menu-item>

	<!-- Delete -->
	<dav-context-menu-item
		[value]="actionsLocale.delete"
		(click)="showDeleteAppointmentDialog(selectedAppointment)"
	>
		<fa-icon slot="icon" [icon]="faTrashLight"></fa-icon>
	</dav-context-menu-item>
</dav-context-menu>

<calendo-appointment-dialog
	#createAppointmentDialog
	[date]="date"
	[nameError]="createAppointmentDialogNameError"
	(primaryButtonClick)="createAppointment($event)"
></calendo-appointment-dialog>

<calendo-create-todo-dialog #createTodoDialog></calendo-create-todo-dialog>

<calendo-delete-appointment-dialog
	#deleteAppointmentDialog
	(primaryButtonClick)="deleteAppointment()"
></calendo-delete-appointment-dialog>
