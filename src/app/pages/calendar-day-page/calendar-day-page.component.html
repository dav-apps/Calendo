<div class="container slide-up-in">
	<dav-header size="lg" backButtonVisible (backButtonClick)="GoBack()">
		{{ title }}
	</dav-header>

	<div class="d-flex flex-column">
		<h3 class="mt-4 mb-3">
			{{ locale.appointments }}
			<button
				type="button"
				class="btn btn-outline-primary btn-sm mb-1"
				(click)="createAppointmentDialog.show()"
			>
				<fa-icon [icon]="faPlus"></fa-icon>
			</button>
		</h3>

		<p
			class="no-items-message font-weight-light"
			*ngIf="dataService.selectedDayAppointments.length == 0"
		>
			{{ locale.noAppointments }}
		</p>

		<calendo-small-appointment-item
			class="d-inline-flex"
			[appointment]="appointment"
			(contextmenu)="smallAppointmentItemContextMenu($event, appointment)"
			(delete)="deleteAppointmentDialog.show()"
			*ngFor="let appointment of dataService.selectedDayAppointments"
		></calendo-small-appointment-item>
	</div>

	<div>
		<h3 class="mt-4 mb-3" ngbDropdown placement="bottom-left">
			{{ locale.todos }}
			<button
				type="button"
				class="btn btn-outline-primary btn-sm mb-1"
				(click)="createTodoDialog.show()"
			>
				<fa-icon [icon]="faPlus"></fa-icon>
			</button>
		</h3>

		<p
			class="font-weight-light no-items-message"
			*ngIf="
				dataService.selectedDayTodos.length == 0 &&
				dataService.selectedDayTodoLists.length == 0
			"
		>
			{{ locale.noTodos }}
		</p>

		<calendo-small-todo-item
			[todo]="todo"
			(delete)="DeleteTodo(todo)"
			*ngFor="let todo of dataService.selectedDayTodos"
		></calendo-small-todo-item>
		<calendo-small-todo-list-item
			[todoList]="todoList"
			*ngFor="let todoList of dataService.selectedDayTodoLists"
		></calendo-small-todo-list-item>
	</div>

	<calendo-appointment-modal
		(save)="CreateAppointment($event)"
	></calendo-appointment-modal>
	<calendo-new-todo-modal (save)="CreateTodo($event)"></calendo-new-todo-modal>
	<calendo-todo-list-modal
		#todoListModal
		(save)="CreateTodoList($event)"
	></calendo-todo-list-modal>
</div>

<dav-context-menu
	#contextMenu
	[visible]="contextMenuVisible"
	[posX]="contextMenuPositionX"
	[posY]="contextMenuPositionY"
>
	<!-- Edit -->
	<dav-context-menu-item [value]="actionsLocale.edit">
		<fa-icon slot="icon" [icon]="faEditLight"></fa-icon>
	</dav-context-menu-item>

	<!-- Delete -->
	<dav-context-menu-item
		[value]="actionsLocale.delete"
		(click)="showDeleteAppointmentDialog(selectedAppointment)"
	>
		<fa-icon slot="icon" [icon]="faTrashLight"></fa-icon>
	</dav-context-menu-item>
</dav-context-menu>

<calendo-create-appointment-dialog
	#createAppointmentDialog
></calendo-create-appointment-dialog>

<calendo-create-todo-dialog #createTodoDialog></calendo-create-todo-dialog>

<calendo-delete-appointment-dialog
	#deleteAppointmentDialog
	(primaryButtonClick)="deleteAppointment()"
></calendo-delete-appointment-dialog>
